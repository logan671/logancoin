# ProjectK - polycopyman 아이디에이션

## 1) 문제 정의
- 사용자가 특정 Polymarket 지갑을 입력하면 그 지갑의 포지션 변화를 빠르게 파악하고,
- 사용자가 정한 규칙에 따라 동일/유사 액션을 수행할 수 있게 만드는 도구.

## 2) 목표
- "단순 알림"을 넘어서 "실행 가능한 카피트레이드 파이프라인" 구축
- 실시간성, 중복 실행 방지, 리스크 제한을 기본값으로 제공

## 3) 핵심 질문
- 어떤 이벤트를 "따라할 신호"로 볼지? (매수/매도/증액/감액)
- 같은 방향이라도 금액은 어떻게 정할지? (고정금/비율/상한)
- 실패/지연/부분체결 시 재시도 정책은?
- 복수 지갑 동시 추적 시 우선순위는?

## 4) 제품 컨셉 옵션

### Option A: Alert-first + One-click 실행
- 먼저 신호를 보내고, 유저가 승인하면 실행
- 장점: 안전, 규제/실수 리스크 낮음
- 단점: 반자동이라 속도 제한

### Option B: Rule-based 자동 실행
- 사전 규칙(최대금액, 슬리피지, 금지마켓) 충족 시 자동 실행
- 장점: 속도, 자동화 수준 높음
- 단점: 잘못된 룰이면 손실 확대 가능

### Option C: Shadow Mode -> Auto Mode
- 초기엔 "실행하지 않고 가상 체결만 기록", 검증 후 자동 실행 전환
- 장점: 실제 자금 리스크 최소화
- 단점: 출시까지 한 단계 더 필요

## 5) 권장 초기 방향 (MVP)
- Option C로 시작:
  1. 실시간 신호 수집
  2. 가상 카피 체결(Shadow PnL)
  3. 성능 검증 후 자동 실행 활성화

## 6) 시스템 아키텍처 초안
- Ingestor: 온체인 이벤트 수집
- Normalizer: 거래 방향/가격/규모 정규화
- Strategy Engine: 카피 규칙 적용
- Executor Adapter: 실제 주문 라우팅
- Risk Guard: 상한/쿨다운/중복/오류 차단
- Audit Log: 모든 의사결정 기록

## 7) 데이터 모델 초안
- watched_wallets: 추적 대상 지갑
- signals: 감지된 원본 신호
- mirror_orders: 카피 주문 요청/상태
- executions: 실제 체결 결과
- risk_events: 차단/제한 이벤트 로그

## 8) 리스크 가드 기본값 제안
- 1회 주문 최대금액: $50~$200 구간에서 시작
- 일 최대 노출: 총자산의 5~10%
- 동일 마켓 재진입 쿨다운: 3~10분
- 슬리피지 상한: 0.5~1.5%
- 연속 실패 n회 시 자동 중지

## 9) 성공 지표
- 신호 감지 지연(p95)
- 카피 체결 성공률
- 중복 실행률(0에 근접해야 함)
- Shadow PnL vs 실제 PnL 괴리
- 최대 낙폭(MDD)

## 10) 다음 결정 필요 항목
- MVP에서 자동 실행을 바로 켤지, Shadow만 먼저 갈지
- 카피 사이징 정책(고정금 vs 비율)
- 운영 인터페이스(Telegram 명령형 vs Web UI)

## 11) 오너 답변칸 (네가 채우는 섹션)

### Q1. 운영 방식
- 질문: 소스 지갑 1개당 팔로우 지갑 1개를 고정(1:1 pair)으로 운영할까?
- 내 답변:ㅇㅇ 고정으로 운영하자

### Q2. 자금 정책
- 질문: 팔로우 지갑별 초기 예산(USD)과 가스 토큰 최소 보유량 기준은?
- 예시: `예산 300 USD, MATIC 최소 5`
- 내 답변:예산은 100~ 1000 USD까지 랜덤으로 할꺼고, 계정당 3 매틱은 채워줄게, 그리고 가스 잔고가 0.5 MATIC 이하가 되면 알림을 받자.

### Q3. 카피 강도
- 질문: 주문 크기 정책은 무엇으로 할까?
- 선택지: `고정금`, `소스 대비 비율`, `최대 상한만 두고 유동`
- 내 답변:주문은 소스 대비 비율이 좋겠어, 쟤 전체 시드 중에 얼마를 배팅했는지 그 비율을 알아서 동일한 비율대로 적용하면 좋겠고, 만약 내가 너무 적은 금액을 해서 실행이 안되는거면 폴리마켓 token별 min_order_size 이상으로는 항상 배팅하면 좋겠어.

### Q4. 실행 모드
- 질문: 시작은 `shadow`(시뮬)로 갈지, 바로 `live` 소액으로 갈지?
- 내 답변:바로 라이브 소액으로 갈거야

### Q5. 매도/청산 규칙
- 질문: 소스가 매도하면 팔로우도 즉시 매도할지, 부분 청산 허용할지?
- 내 답변:소스가 매도하면 팔로우도 즉시 매도야

### Q6. 리스크 한도
- 질문: 아래 항목의 수치를 어떻게 둘지?
- 항목: `1회 최대 주문`, `일 최대 손실`, `연속 실패 허용 횟수`, `슬리피지 상한`
- 내 답변:손실은 봐도 상관 없어, 대신에 손실을 봤을떄 그 이유 정도는 텔레그램으로 받아볼 수 있으면 좋겠음. 슬리피지 상한은 3%로 하고, 연속 실패 허용 횟수는 3회로 하자.


### Q7. 비상정지 조건
- 질문: 어떤 상황에서 자동으로 중지할까?
- 예시: `RPC 오류 5회 연속`, `체결 실패 3회 연속`, `잔고 부족`
- 내 답변:ㅇㅇ 저거 3개 다 가자. 그리고 가스 잔고 0.5 MATIC 이하일 때는 텔레그램 알림을 보내자.

### Q8. 키 관리 방식
- 질문: 니모닉은 어떤 방식으로 저장/복호화할까?
- 선택지: `로컬 암호화 파일 + 마스터 비밀번호`, `외부 KMS`, `수동 입력만`
- 내 답변:너 추천에 따를꼐, 지금 내 계획은 20~50 계정을 따라하는거긴 해서, 다수의 니모닉을 관리할수있는 형태면 좋겠어. 걍 엑셀 스프레드 시트할까? 아니면 다른 방법?

### Q9. 우선 추적 대상
- 질문: 첫 MVP에서 추적할 소스 지갑은 몇 개로 시작할까?
- 내 답변:일단은 3개정도 알려줄거야. 근데 확장성이 필요해

### Q10. 운영 인터페이스
- 질문: 초기 운영은 Telegram 명령형으로 충분한지, Web UI가 꼭 필요한지?
- 내 답변:웹이 꼭 필요해, 지갑을 여러개 운영할꺼다 보니까, 각 지갑이 돈을 어느 정도 벌었는지 추적할 수 있는 봇이 필요하거든
