# 휘릭휘릭메모장 (앞으로 할 일만)

## 복붙용 명령어

### 1) personal 서버 접속
```bash
ssh -i ~/.ssh/keys/lightsail-default.pem ubuntu@43.203.122.192
```

### 2) ProjectK 폴더 이동 + 현재 페어 확인
```bash
cd ~/claudecode/ProjectK-polycopyman
sqlite3 /tmp/projectk_local.db "select p.id as pair_id, f.label as follower_label, f.address as follower_address, f.budget_usdc, p.min_order_usdc, p.max_order_usdc, p.max_slippage_bps from wallet_pairs p join follower_wallets f on f.id=p.follower_wallet_id order by p.id;"
```

### 3) 권장 파라미터 적용 (예: pair_id 1=100불, 2=200불)
```bash
cd ~/claudecode/ProjectK-polycopyman
sqlite3 /tmp/projectk_local.db "update follower_wallets set budget_usdc=100, updated_at=strftime('%s','now') where id=(select follower_wallet_id from wallet_pairs where id=1); update wallet_pairs set min_order_usdc=2.0, max_order_usdc=8.0, max_slippage_bps=150, max_consecutive_failures=3, rpc_error_threshold=5, updated_at=strftime('%s','now') where id=1; update follower_wallets set budget_usdc=200, updated_at=strftime('%s','now') where id=(select follower_wallet_id from wallet_pairs where id=2); update wallet_pairs set min_order_usdc=2.0, max_order_usdc=15.0, max_slippage_bps=150, max_consecutive_failures=3, rpc_error_threshold=5, updated_at=strftime('%s','now') where id=2;"
```

### 4) executor 안전값 환경변수 추가
```bash
cd ~/claudecode/ProjectK-polycopyman
if ! grep -q '^PROJECTK_EXECUTOR_MARKET_MIN_BUY_USDC=' .env 2>/dev/null; then echo 'PROJECTK_EXECUTOR_MARKET_MIN_BUY_USDC=1' >> .env; else sed -i "s/^PROJECTK_EXECUTOR_MARKET_MIN_BUY_USDC=.*/PROJECTK_EXECUTOR_MARKET_MIN_BUY_USDC=1/" .env; fi
if ! grep -q '^PROJECTK_EXECUTOR_BALANCE_FAIL_COOLDOWN_SECONDS=' .env 2>/dev/null; then echo 'PROJECTK_EXECUTOR_BALANCE_FAIL_COOLDOWN_SECONDS=300' >> .env; else sed -i "s/^PROJECTK_EXECUTOR_BALANCE_FAIL_COOLDOWN_SECONDS=.*/PROJECTK_EXECUTOR_BALANCE_FAIL_COOLDOWN_SECONDS=300/" .env; fi
if ! grep -q '^PROJECTK_USDC_TOKEN_ADDRESS=' .env 2>/dev/null; then echo 'PROJECTK_USDC_TOKEN_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174' >> .env; fi
```

### 5) register bot 재시작 (/status 반영)
```bash
cd ~/claudecode/ProjectK-polycopyman
pkill -f 'python3 -m bot.register_bot' || true
nohup env $(grep -v '^#' .env | xargs) /usr/bin/python3 -m bot.register_bot > /tmp/projectk-register-bot.log 2>&1 &
```

### 6) 상태 확인 (/status 테스트 전)
```bash
tail -n 80 /tmp/projectk-register-bot.log
sqlite3 /tmp/projectk_local.db "select p.id as pair_id, f.label, f.budget_usdc, p.min_order_usdc, p.max_order_usdc, p.max_slippage_bps from wallet_pairs p join follower_wallets f on f.id=p.follower_wallet_id order by p.id;"
```

### 7) 텔레그램에서 실행
```bash
/status
```
